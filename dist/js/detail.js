"use strict";$(function(){var t=location.search.split("=")[1];$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",{goodsID:t},function(t){var n,e;n='<div id = "midpic"><img src="'+t[0].goodsListImg+'"><div id = "zoom"></div></div><ul id="smallpic">\n\t\t\t\t\t<li><img src="'+t[0].goodsListImg+'"></li>\n\t\t\t\t\t<li><img src="../images/25.jpg"></li>\n\t\t\t\t\t<li><img src="../images/26.jpg"></li>\n\t\t\t\t\t<li><img src="../images/27.jpg"></li>\n\t\t\t\t\t<li><img src="../images/28.jpg"></li>\n\t\t\t\t</ul><div id = "bigpic"><img src = "'+t[0].goodsListImg+'"></div>',e='\n\t\t\t\t<div class="title">\n\t\t\t\t\t<span>[包邮]</span>\n\t\t\t\t\t<a href="">戴维贝拉 dave&bella</a>\n\t\t\t\t\t<span>'+t[0].goodsName+'</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="title2">\n\t\t\t\t\t<a href="">戴维贝拉超级大牌日</a>\n\t\t\t\t\t<span>'+t[0].detail+'</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="price-box">\n\t\t\t\t\t<div class="price-tit">\n\t\t\t\t\t\t<span>售价</span>\n\t\t\t\t\t\t<span>￥<em>'+t[0].price+'</em></span>\n\t\t\t\t\t\t<span>￥<i>268.00</i></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="youhui">\n\t\t\t\t\t\t<span>优惠</span>\n\t\t\t\t\t\t<span>满减</span>\n\t\t\t\t\t\t<span>大牌日【每满200减20·不封顶】</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="lingquan">\n\t\t\t\t\t\t<span>领券</span>\n\t\t\t\t\t\t<span>满6减5券</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<br /><br />\n\t\t\t\t<div class="num">\n\t\t\t\t\t<p>数量</p>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type="button" id="btn11"  value="-" />\n\t\t\t\t\t\t<strong>1</strong>\n\t\t\t\t\t\t<input type="button" id="btn12" value="+" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p class="add" data-id = "'+t[0].goodsID+'">加入购物车</p>\n\t\t\t',$("#main-left").html(n),$(".main-right").html(e),$("#btn11").click(function(){var t=Number($(this).siblings("strong").html());--t<=1&&(t=1),$(this).siblings("strong").text(t)}),$("#btn12").click(function(){var t=Number($(this).siblings("strong").html());t++,$(this).siblings("strong").text(t)}),$(".add").click(function(){var e=$(this).siblings(".num").find("strong").html(),i=$(this).attr("data-id");console.log(i),$.getJSON("http://datainfo.duapp.com/shopdata/getCar.php?callback=?",{userID:$.cookie("username")},function(t){if(console.log(t),0!=t)for(var n=0;n<t.length;n++)t[n].goodsID==i?(e=Number(t[n].number)+Number(e),console.log(e),$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:i,number:e},function(t){console.log(t),0==t&&alert("添加失败"),1==t&&alert("添加成功")})):$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:i,number:e},function(t){0==t&&alert("添加失败"),1==t&&alert("添加成功")});else console.log(222),$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:i,number:e},function(t){0==t&&alert("添加失败"),1==t&&alert("添加成功")})})});for(var s=document.getElementById("main-left"),o=document.getElementById("midpic"),i=o.children[0],a=document.getElementById("zoom"),l=document.getElementById("bigpic"),d=l.children[0],p=document.getElementById("smallpic").children,c=function(n){p[n].onmouseover=function(){var t=p[n].children[0];i.src=t.src,d.src=t.src}},g=0;g<p.length;g++)c(g);o.onmouseover=function(){a.style.display="block",l.style.display="block"},o.onmouseout=function(){a.style.display="none",l.style.display="none"},o.onmousemove=function(t){var n=t||event,e=n.pageX-s.offsetLeft-a.offsetWidth/2,i=n.pageY-s.offsetTop-a.offsetHeight/2;e<=0&&(e=0),e>=o.offsetWidth-a.offsetWidth&&(e=o.offsetWidth-a.offsetWidth),i<=0&&(i=0),i>=o.offsetHeight-a.offsetHeight&&(i=o.offsetHeight-a.offsetHeight),a.style.left=e+"px",a.style.top=i+"px",d.style.left=-a.offsetLeft/o.offsetWidth*d.offsetWidth+"px",d.style.top=-a.offsetTop/o.offsetHeight*d.offsetHeight+"px"}})});